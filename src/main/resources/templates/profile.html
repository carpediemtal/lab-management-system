<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Profile</title>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"
            integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"
          integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>
<body style="font-size:16px">
<div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm">
    <h5 class="my-0 mr-md-auto font-weight-normal"><a href="/">实验室管理系统</a></h5>

    <div th:if="${user eq null}">
        <a href="/sign_in" class="btn btn-outline-primary">登陆</a></div>
    <div th:if="${user ne null}">
        <span>Welcome, <a href="/profile" th:text="${user.name}"></a></span>
        &nbsp;&nbsp;&nbsp;
        <a href="/sign_out" class="btn btn-outline-danger">退出</a>
    </div>
</div>

<div class="container" style="max-width: 960px">
    <div class="row">
        <div class="col-12 col-md">
            <h3>个人信息</h3>
            <p><img class="rounded" style="width:80px;height:80px" th:src="${user.imagUrl}" src="#"
                    alt="this is an image"></p>
            <p>邮箱: <span th:text="${user.email}"></span></p>
            <p>姓名: <span th:text="${user.name}"></span></p>
            <p>用户类型：<span th:text="${user.type}"></span></p>
        </div>
    </div>
    <p></p>
    <div id="functions">
        <h3>功能</h3>
        <div th:if="${flag eq 1}">
            <button class="btn btn-outline-primary" v-on:click="courseQuery">课程查询</button>
            <button class="btn btn-outline-primary" v-on:click="scoreQuery">成绩查询</button>
        </div>
        <div th:if="${flag eq 2}">
            <button class="btn btn-outline-primary" v-on:click="recordScore">录入学生成绩</button>
        </div>
        <div th:if="${flag eq 3}">
            <button class="btn btn-outline-primary" v-on:click="labManagement">实验课程管理</button>
            <button class="btn btn-outline-primary" v-on:click="courseManagement">实验课程安排</button>
        </div>
    </div>

    <footer class="pt-4 my-md-5 pt-md-5 border-top">
        <div class="row">
            <div class="col-12 col-md">
                <h5>Copyright&copy;2020</h5>
                <p>
                    <a target="_blank" href="https://linjinming.gitee.io/"><i class="fa fa-leaf"></i> Blog</a> -
                    <a target="_blank" href="https://github.com/carpediemtal"><i class="fa fa-github"></i> Github</a>
                </p>
            </div>
        </div>
    </footer>
</div>
</body>
<script>
    new Vue({
        el: '#functions',
        methods: {
            scoreQuery() {
                window.location.href = '/score_query';
            },
            courseQuery() {
                window.location.href = '/course_query'
            },
            recordScore() {
                window.location.href = '/record_score';
            },
            labManagement() {
                window.location.href = '/lab_management'
            },
            courseManagement() {
                window.location.href = '/lab_arrangement'
            }
        }
    });
</script>
</html>
